cco-mysqldata:
  image: tianon/true
  volumes:
    - ./mysql/mysql-shr:/shr:rw
    - ./mysql/mysql-conf.d:/etc/mysql/conf.d:z
    - ./mysql/mysql-datadir:/var/lib/mysql:rw
    - ./mysql/mysql-autoload:/docker-entrypoint-initdb.d:ro

cco-pgdata:
  image: tianon/true
  volumes:
    - ./pg/pg-datadir:/var/lib/postgresql/data:rw
    - ./pg/pg-autoload:/docker-entrypoint-initdb.d:ro

cco-mysql:
  image: mysql
  environment:
    - MYSQL_ROOT_PASSWORD=password12
    - MYSQL_DATABASE=cco
    - MYSQL_USER=dina
    - MYSQL_PASSWORD=password12
  ports:
    - "13306:3306"
  volumes_from:
    - cco-mysqldata

cco-postgres:
  image: postgres
  environment:
    - POSTGRES_DB=cco
    - POSTGRES_USER=dina
    - POSTGRES_PASSWORD=password12
  ports:
    - "15432:5432"
  volumes_from:
    - cco-pgdata

cco-tools:
  build: ./cco-tools
  volumes:
    - ./cco-tools:/usr/src/myapp:rw
  links:
    - cco-mysql
    - cco-postgres
